<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Freshchat Widget Test</title>
</head>
<body>
  <h1>Freshchat Test Page</h1>

  <!-- Freshchat widget -->
  <script 
    src="//eu.fw-cdn.com/12807504/785979.js" 
    chat="true" 
    widgetId="9975dd6c-e35d-40b8-acfc-77ae3613ad9c">
  </script>

  <!-- Init script -->
  <script>
    function waitForFreshchatWidget(callback) {
      if (window.fcWidget && window.fcWidget.on) {
        callback();
      } else {
        setTimeout(function () {
          waitForFreshchatWidget(callback);
        }, 200);
      }
    }

    waitForFreshchatWidget(function () {
      console.log("Freshchat widget loaded.");

      window.fcWidget.on('widget:ready', function () {
        console.log("Freshchat widget is ready.");

        // Wait 1 second to ensure it's fully initialized
        setTimeout(function () {
          console.log("Sending user data...");

          window.fcWidget.setExternalId("john.doe1987");
          window.fcWidget.user.setFirstName("John");
          window.fcWidget.user.setEmail("john.doe@gmail.com");

          window.fcWidget.user.setProperties({
            cf_plan: "Pro",
            cf_status: "Active"
          });

          console.log("User data sent.");
        }, 1000);
      });
    });
  </script>
</body>
</html>
